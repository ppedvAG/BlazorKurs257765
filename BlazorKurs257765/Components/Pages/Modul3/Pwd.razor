@page "/pwd"
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@inject ProtectedLocalStorage localStorage
<h3>Pwd</h3>
<div class="container">
    <div class="input-group mb-3">
        <input type="text" class="form-control" @bind="Eingabe"
        placeholder="passwort" >
        <button class="btn btn-outline-secondary" type="button" @onclick="save"><i class="bi bi-floppy"></i> save</button>
    </div>

</div>
@code {
    string Eingabe;

    void save()
    {
        localStorage.SetAsync("pwd",  Eingabe);

    }
    //Load nur mit     <Routes @rendermode="@(new InteractiveServerRenderMode(prerender:false))" />
    // protected override async Task OnInitializedAsync()
    // {
    //     var result = await localStorage.GetAsync<string>("pwd");
    //     if (result.Success)
    //     {
    //         Eingabe = result.Value;
    //     }
    // }


    protected override async  Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var result = await localStorage.GetAsync<string>("pwd");
            if (result.Success)
            {
                Eingabe = result.Value;
                StateHasChanged();
            }
        }
    }
}
